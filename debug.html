<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>BuggyWeb (debug)</title>
  <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">

  <!-- Third-Party Libraries -->
  <script src="libs/jquery.js"></script>
  <script src="libs/jquery-ui.js"></script>
  <script src="libs/jquery.ui.touch-punch.js"></script>
  <script src="libs/underscore.js"></script>
  <script src="libs/backbone.js"></script>
  <script src="libs/hammer.min.js"></script>
  <script src="libs/semantic.js"></script>
  <script src="libs/highlight.pack.js"></script>

  <!-- Built-in Libraries -->
  <script src="libs/CircularBuffer.js"></script>

  <!-- Dataflow core -->
  <script src="src/dataflow.js"></script>
  <script src="src/state.js"></script>

  <!-- Dataflow Modules -->
  <script src="src/modules/graph.js"></script>
  <script src="src/modules/node.js"></script>
  <script src="src/modules/input.js"></script>
  <script src="src/modules/output.js"></script>
  <script src="src/modules/edge.js"></script>

  <script src="src/modules/graph-view.js"></script>
  <script src="src/modules/node-view.js"></script>
  <script src="src/modules/input-view.js"></script>
  <script src="src/modules/output-view.js"></script>
  <script src="src/modules/edge-view.js"></script>

  <!-- Cards -->
  <script src="src/modules/card.js"></script>
  <script src="src/modules/card-view.js"></script>
  <script src="src/modules/menucard.js"></script>
  <script src="src/modules/menucard-view.js"></script>
  <script src="src/modules/node-inspect-view.js"></script>
  <script src="src/modules/edge-inspect-view.js"></script>

  <!-- Nodes (some basics to extend) -->
  <script src="src/nodes/base.js"></script>
  <script src="src/nodes/base-resizable.js"></script>
  <script src="src/nodes/test.js"></script>
  <!-- Nodes (subgraph functionality) -->
  <script src="src/nodes/dataflow-input.js"></script>
  <script src="src/nodes/dataflow-output.js"></script>
  <script src="src/nodes/dataflow-subgraph.js"></script>

  <!-- Plugins -->
  <script src="src/plugins/menu.js"></script>
  <script src="src/plugins/edit.js"></script>
  <script src="src/plugins/view-source.js"></script>
  <script src="src/plugins/log.js"></script>
  <script src="src/plugins/inspector.js"></script>
  <script src="src/plugins/keybinding.js"></script>
  <script src="src/plugins/notification.js"></script>
  <script src="src/plugins/search.js"></script>

  <!-- ################ Buggy Stuff ################# -->
  <script src="libs/prelude-browser-min.js"></script>
  <script data-main="libs/buggy.js" src="libs/require.js"></script>
  <!-- Semantic loading isn't nice yet. This file (should) contain(s) all
      semantic data packed in buggy. -->
  <script src="libs/semantics.js"></script>
  <script src="src/buggy-plugins/buggy-wrap.js"></script>
  <script src="src/nodes/symbol.js"></script>
  <script src="src/buggy-plugins/logo.js"></script>
  <script src="src/buggy-plugins/search.js"></script>
  <script src="src/buggy-plugins/interfaces.js"></script>
  <script src="src/buggy-plugins/compose.js"></script>


  <!-- Usability Features -->
  <script src="src/usability/introduction.js"></script>

  <!-- Style -->
  <!-- Fonts -->
  <link rel="stylesheet" href="themes/default/font-proximanova.css">
  <link rel="stylesheet" href="themes/default/font-awesome.css">
  <!-- Theme -->
  <link rel="stylesheet" href="themes/default/dataflow.css">
  <link rel="stylesheet" href="themes/default/modules/node.css">
  <link rel="stylesheet" href="themes/default/modules/edge.css">
  <link rel="stylesheet" href="themes/default/modules/port.css">
  <link rel="stylesheet" href="themes/default/modules/card.css">
  <link rel="stylesheet" href="themes/default/modules/jqui.css">
  <link rel="stylesheet" href="themes/default/modules/search.css">
  <link rel="stylesheet" href="themes/default/modules/logo.css">
  <link rel="stylesheet" href="themes/default/modules/compose.css">
  <link rel="stylesheet" href="themes/default/modules/help.css">
  <link rel="stylesheet" href="themes/default/semantic.min.css">
  <link rel="stylesheet" href="themes/default/magula.css">

</head>

<body >
  <div class="logo"> <table><tr><td>Buggy<div class="versionLogo"><br/>v. <span id="version">0.5.0</span><br/><br/> powered by <a href="https://github.com/meemoo/dataflow" style="color:white">dataflow.js</a></div></td>
    <td><img src="resources/logo.png" width="100" style="position:relative;top:20px" /></td></tr></table></div>
  <div class="compose">
    <div id="compose-button" class="ui teal button"><i class="icon play"></i> Compose</div>
    <div id="compose-info-button" class="ui button disabled icon">
      <i class="icon info letter"></i>
    </div>
  </div>
  <div class="help">
    <div id="help-button" class="ui icon blue button">
      <i class="icon question"></i>
    </div>
  </div>
  <div class="ui page dimmer">
    <div class="content" style="width:80%">
      <div class="center" style="width:30%">
        <h2 class="ui inverted icon header"><span id="compose-info"><i class="icon circular inverted emphasized info letter blue"></i>Information on Composition</span>
          <div class="sub header">
            Click gray area to close this view
          </div>
        </h2>
      </div>
      <div class="ui left aligned inverted segment green" style="height:100%;">
        <div class="ui accordion fluid">
          <div class="title">
            <i class="icon code"></i> Generated Source Code
          </div>
          <div class="content">
            <span class="newTitle" style="display:none;" data-iconclass="icon circular inverted emphasized code blue">Composed Code</span>
            <div style="max-height:80vh;overflow:auto;display:block;">
              <pre>
                <code class="compose-code"></code>
              </pre>
            </div>
          </div>
          <div class="title">
            <i class="icon sitemap"></i>Dependency Graph
          </div>
          <div class="content">
            <span class="newTitle" style="display:none;" data-iconclass="icon circular inverted emphasized sitemap blue">Dependency Graph</span>
            <div style="max-height:80vh;overflow:auto;display:block">
              Bla
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
  <div id="graph1" style="position:absolute; overflow:auto; top:0px; right:0px; bottom:0px; left:0px; border: 1px solid black;"></div>

  <!-- Testing -->
  <script>
  var prelude = _require("prelude-ls");
  installPrelude(window,prelude);
  hljs.configure({classPrefix: ''});
  hljs.initHighlightingOnLoad();
  require(["ls!src/buggy"],function(Buggy){

    $(function($){
      // Everything should be loaded now

      // Test 2 graphs
      var dataflow = new window.Dataflow({
        appendTo: "#graph1",
        buggy: Buggy.create()
      });

      // Load test graph
      var g = dataflow.loadGraph(
        {nodes:[],edges:[]}
      );
      g.trigger("change");

      window.d = $(".dataflow").data("dataflow");
    });

  });
  </script>

</body>
</html>
